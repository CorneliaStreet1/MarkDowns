# 中国的超级计算机

## 引言

目前我国的两台大型超级计算机——神威·太湖之光以及天河二号，目前在全球的超级计算机的top500榜单上分别名列第四和第七，是我国在计算机领域名副其实的领先产品。目前全球超算TOP500，中国占据173台，而美国略逊一筹，仅有149台。不过数量多不是重点，超算最需要的是算力高质量好。中国的超算从2010年开始，数次摘得高性能计算领域的戈登:贝尔奖”的桂冠。该奖项是为了表彰应用超算从事基础研究并对人类发展作出突出的贡献的奖，堪称是超算界的诺贝尔奖。2017年11月17日清华大学地球系统科学系副教授付吴桓等共同领导的团队再次使用神威·太湖之光超算完成的非线性地震模拟”再次得奖。所以我国超算性能极佳。本文将以我国的超级计算机为例，阐述它的特点、功能和应用。



下表为截止2021年11月，全球前十的超级计算机榜单

| 排名 |             名称及所属国家             |   核心数   |
| :--: | :------------------------------------: | :--------: |
|  1   |           富岳（Fugaku）日本           | 7,630,848  |
|  2   |           顶点（Summit）美国           | 2,414,592  |
|  3   |           山脊（Sierra）美国           | 1,572,480  |
|  4   | 神威·太湖之光（Sunway TaiHulight）中国 | 10,649,600 |
|  5   |       波尔马特（Perlmutter）美国       |  761,856   |
|  6   |          塞勒涅（Selene）美国          |  555,520   |
|  7   |       天河二号（Tianhe-2A）中国        | 4,981,760  |
|  8   |       JUWELS BOOSTER MODULE 德国       |  449,280   |
|  9   |              HPC5 意大利               |  669,760   |
|  10  |           Voyager-EUS2 美国            |  253,440   |

## 特点

​		超算其实没有那么神秘，它和我们日常使用的PC机在原理上是大体相同的，二者最大的区别就是规模。一般的PC机一般只有一颗CPU，其中的核心数一般不超过二十个，而一般的超算则有成千上万颗CPU，每颗CPU内一般有数十个核心。除此之外，二者的内存大小也存在数量级的差距。以笔者本人2020年购入的联想笔记本为例，笔者的电脑的CPU为AMD锐龙，其中共有12个核心，共有16 GB的内存，而我国的超级计算机“神威·太湖之光”整台共有40960块处理器，10649600个核心，1310720 GB内存。

​		神威·太湖之光这么多的CPU和核心数当然不是拿来烧开水的，而是为了完成并行运算。如此多的核心数和处理器数，造就了神威·太湖之光最大的特点——快，而且是难以直观想象地快。神威·太湖之光的计算速度为每秒 9.3 亿亿次，数字可能不太直观，所以我们可以使用笔者2020年购入的笔记本与神威·太湖之光做对比。在此我们做一个粗略的计算，仅仅考虑数量级的关系，笔者的笔记本的处理器的基础频率是3.00 GHz，最大频率为4.00 GHz，我们取最小频率计算，则笔者的笔记本每秒的计算次数大约为3亿次。我们用九点三亿亿去除以3亿，商大约是3.1亿。也就是说，神威·太湖之光在一秒内做的计算，笔者的笔记本电脑需要大约三亿秒，而三亿秒大概是九年零九个月。可能这就是另一种意义上的台上一秒钟台下十年功吧。

​		如此大的规模当然也就造就了超级计算机巨大的物理体积和占地面积，以及惊人的耗电规模。天河2号日完成作业1万3千多次，负载80%左右，日耗电费20多万元。下图为我国的超级计算机天河二号。

<img src="https://pica.zhimg.com/80/v2-9750e5d958060e5b76c923cb81dddb93_720w.jpg?source=1940ef5c" style="zoom:45%;" /><img src="https://raw.githubusercontent.com/CorneliaStreet1/PictureBed/master/202204292051376.jpeg" style="zoom: 45%;" /><img src="https://pica.zhimg.com/80/v2-b5a3abcde5d395a756aba84ac456b3e8_720w.jpg?source=1940ef5c" style="zoom: 45%;" />

## 功能和应用

​		超级计算机作为国之重器，其最主要的功能就是高性能计算服务。接下来笔者将会举几个各个领域的例子，来说明我国的超级计算机典型应用。、

<img src="https://raw.githubusercontent.com/CorneliaStreet1/PictureBed/master/202204292210947.png" alt="img" style="zoom:80%;" />

​		第一个例子是有关我国的国产大飞机C919的。我国C919的风洞试验拥有大量的实验数据，都是通过超算来计算的。通过模拟实验可大幅加快我国大飞机的研发进度。在飞行器制造领域，经常要计算飞机附近空气的流动，以及飞行器本身的受力情况。最常用的计算方法是把空气、机体分割成一个个小块块，分别计算每个小块的运动和受力，再整合起来得到整体的运动和受力情况。一般来说，分割的越精细，每个小块越小，计算越准确。但鱼与熊掌不可兼得，分割的越精细，计算量也越大。

​																					下图是一个飞机和空气的网格划分。

<img src="https://raw.githubusercontent.com/CorneliaStreet1/PictureBed/master/202204292108482.jpeg" alt="img" style="zoom: 80%;" />



​		假如要把一个1$m^3$的立方体分成1$mm^3$的小方块，那么就要对10亿个小方块进行计算。如果用单个CPU核心，需要连续做10亿次运算，算完整个过程可能要花上一天。

​		而如果有10个CPU核心，那就可以把这10亿个方块分成10份，每个CPU核心只要计算1亿个方块，然后把得到的结果整合起来就行。这样大约能快上10倍，两个小时就能算完了。

​		第二个例子是关于天气预报的。气候预测，广泛来看就是对全球气流、洋流等等的预测，局限来看就是天气预报。天气预报的基本原理，就是通过气象卫星捕捉地图上每一个点的云层和气流运动轨迹，然后通过大量的计算推导出他们未来的走向。要知道，即使是今天，对于天气的预报，精度都难以达到80%以上。但是，现在的天气预测已经比以前准确得多。这就是因为我们现在的高性能计算能力大幅提高了。举个例子，之前气象计算的粒度是1个经纬度，大概是111公里，而现在我们气象计算的精度已经细到了3公里，气象科学家们已经把精度提高到1公里。这样的精度提升，对于计算力的要求是指数级的。在这方面，中科院软件所、清华大学、北京师范大学借助于神威·太湖之光设计并开发了一种用于大气动力学中经常出现的强时间依赖问题的高可扩展性全隐式求解器。该求解器使用异构多重网格局部分解算法，显著加快了求解器的收敛过程，并利用粗粒度并行。此外，设计了在物理上的多块异步不完全LU分解方法来解决每个重叠子域上的子问题，从而进一步取得粗粒度并发。同时，在不同硬件层级上实现了系统层面上的优化，充分利用异构计算单元，减少数据移动的开销。基于“神威·太湖之光”超级计算机，该求解器实现了快速且准确的大气模拟，可以扩展到850万核，取得了1.5 PFlops的持续计算性能。该应用于2016年获得戈登贝尔(Gorden Bell)奖提名。

![img](https://raw.githubusercontent.com/CorneliaStreet1/PictureBed/master/202204292237012.png)

![img](https://raw.githubusercontent.com/CorneliaStreet1/PictureBed/master/202204292248594.jpeg)

​																		▲用计算机预测云团的走向（图片来自北京大学科学可视化系统）

​		第三个例子则事关国防安全。1996年各大国签署了《[全面禁止核试验条约](https://www.zhihu.com/search?q=全面禁止核试验条约&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A133188248})》后，名义上就不能进行核试验了（我国成功进行了最后一次核试验后当即宣布签署该条约），但还想继续研究核武，怎么办？就只能用超算进行仿真实验了，也就是说用程序建模模拟原子核反应的过程。核反应是一个链式反应，原子裂变之后会影响到周围的原子，周围的原子又会影响它们周围的原子，对于这些原子行为模拟所需要的计算数量级，就迅速变成了指数型的关系。这就需要非常强大的超算才能进行模拟。而且，要知道这种模拟对于[计算力](https://www.zhihu.com/search?q=计算力&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A383191939})的要求是没有上限的。计算能力越强，模拟就能进行得更精准，从而能够发现更深层的规律。精确到这个量级的仿真实验，运算量可想而知，只有超算能跑这样的程序。所以美国的很多超算研究都是由美国能源部牵头的（该部门兼管核能），包括著名的Exascale计划。类似地还有很多材料/化学科学/工程的实验，研究原子分子的行为用计算机仿真是很方便便捷的研究方式。

## 总结



​		我国的超级计算机目前广泛应用于物理化学天文气候气象、生物医药新能源流体仿真大飞机、以及更多地震成像等领域。借助超级计算机的超级计算力，可以进行模拟仿真实验，而模拟仿真实验是许多大型科技项目的必需步骤（比如武器研发，如果不仿真意味着每次都要实际发射或爆炸一次）。

​		另外，通过研发和应用超级计算机，可以培养大批高端科研人才，这些人才获得的技术技能可以应用到大量领域，进而提升整个国家的科技和工业水平。超级计算机和航天工程一样，都是集科研与实用为一体的大型项目，可以提升一个国家的工业实力和科技水平，所以应该长期坚持对这些领域的投入。

## 参考文献

### 1.有关全球超级计算机的统计数据的来源

- 关于Top500Project：
  - TOP500 项目对全球 500 个最强大的非分布式计算机系统进行排名和详述。这个项目始于1993年，每年发布两次更新的超级计算机排行榜，第一次更新在6月，和[国际超级计算大会](https://en.wikipedia.org/wiki/International_Supercomputing_Conference)同时举行，第二次更新在11 月的[ACM/IEEE 超级计算大会](https://en.wikipedia.org/wiki/ACM/IEEE_Supercomputing_Conference)上发布。
  - 在笔者写文章的日期（2022年4月29日），最新的榜单为2021年11月发布的，有关超级计算机的统计数据均以2021年11月的榜单为根据。
  - [2021年11月的Top500超级计算机榜单(Top500项目的官方网站)](https://www.top500.org/lists/top500/2021/11/):https://www.top500.org/lists/top500/2021/11/
  - [有关Top500项目的详细介绍的Wikipedia](https://en.wikipedia.org/wiki/TOP500#TOP_500)：https://en.wikipedia.org/wiki/TOP500#TOP_500

- 关于目前中国拥有的处于Top500的超级计算机数目：笔者使用的是Top500项目官方网站的数据生成器进行的查询，数据也是基于2021年11月发布的榜单。
  - [读者可以自行去该链接查询](https://www.top500.org/statistics/sublist/)：https://www.top500.org/statistics/sublist/。
    - 如果读者查询的是中国的超算数目，网页的下端会列出完整的173台超算的列表，由于篇幅有限在此次不做展示。
  - 查询到的中国拥有的Top500超算数目：
    - <img src="https://raw.githubusercontent.com/CorneliaStreet1/PictureBed/master/202204291824687.png" alt="屏幕截图 2022-04-29 182117" style="zoom: 60%;" />
  - 查询到的美国拥有的Top500超算数目：
    - <img src="https://raw.githubusercontent.com/CorneliaStreet1/PictureBed/master/202204291830644.png" alt="美国超算" style="zoom:60%;" />



### 2.有关神威·太湖之光超级计算机的统计数据的来源

- 关于神威·太湖之光的硬件资源信息收集于国家超级计算无锡中心的官方网站公开信息。
  - 国家超级计算无锡中心：http://www.nsccwx.cn/swsource/5d2fe23624364f0351459262
  - 硬件信息：采集自官网
    - <img src="https://raw.githubusercontent.com/CorneliaStreet1/PictureBed/master/202204291908172.png" alt="image-20220429190839085" style="zoom: 67%;" />

### 3.应用举例的资料来源

- 部分来源于国家超级计算无锡中心的官方网站：http://www.nsccwx.cn/case/5d26d7cf81f7af059f9b6252
- 其余部分收集于互联网。